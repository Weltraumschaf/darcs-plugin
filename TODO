1. Factor out darcs commands
2. poll darcs cha --xml-output and parse it as changeset
3. give the polled changeset to revisions tate and calc an int hash of it